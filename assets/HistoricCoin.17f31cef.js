import{_ as m,o as a,c as o,p as S,a as w,b as t,d as L,i as B,r as C,e as b,w as k,f as U,g as p,t as i,h as f,u as g,j as h,k as j,v as P}from"./index.0af2cfe9.js";function y(){return new Date().toLocaleString("pt-BR",{dateStyle:"short"}).replaceAll("/","-")}const R={},V=n=>(S("data-v-49196f92"),n=n(),w(),n),I={class:"flex flex-1 items-center justify-center"},H=V(()=>t("div",null,[t("div",null,[t("div",{class:"dot-typing"})])],-1)),$=[H];function M(n,r){return a(),o("div",I,$)}const v=m(R,[["render",M],["__scopeId","data-v-49196f92"]]),N={key:1,class:"flex w-full flex-1 flex-col justify-between gap-4"},O={class:"flex items-center justify-start gap-4"},T=["src","alt"],A={class:"text-2xl"},E={class:"text-xl font-thin"},F={key:1},q={key:0,class:"flex flex-1 flex-wrap items-center justify-center text-center"},z={class:"w-64"},G={key:1,class:"flex flex-col"},J={class:"flex justify-between text-lg"},K={class:"flex justify-between"},Q={class:"rounded-lg bg-gray-700 py-2 text-white"},W=L({__name:"HistoricCoin",props:{data:null},setup(n){const r=n,u=B("coinsService"),l=C(""),e=b({isLoadingContent:!0,isValidDateRange:!0,isLoadingUpdate:!1,shortDate:y(),inputDateSearch:y().split("-").reverse().join("-"),coin:{name:"",symbol:"",image:"",currentPriceBrl:0,currentPriceUsd:0}});async function x(){e.isLoadingContent=!0;const{name:s,symbol:c,image:d,market_data:_}=await u.getCoinsHistoricalByDate(r.data.id,e.shortDate);e.coin={name:s,symbol:c,image:d.small,currentPriceBrl:_.current_price.brl,currentPriceUsd:_.current_price.usd},e.isLoadingContent=!1}async function D(){e.isValidDateRange=!1,e.isLoadingUpdate=!0;const{market_data:s}=await u.getCoinsHistoricalByDate(r.data.id,e.shortDate);e.coin={...e.coin,currentPriceBrl:s.current_price.brl,currentPriceUsd:s.current_price.usd},e.isValidDateRange=!0,e.isLoadingUpdate=!1}return k(()=>e.inputDateSearch,()=>{if(l.value="",!!e.inputDateSearch){if(new Date(e.inputDateSearch).toISOString()>new Date().toISOString()){l.value="Data incorreta! Selecione uma data anterior da data atual!",e.isValidDateRange=!1,e.isLoadingUpdate=!1;return}e.shortDate=e.inputDateSearch.toString().split("-").reverse().join("-"),D()}}),U(async()=>{await x(),e.isLoadingContent=!1}),(s,c)=>e.isLoadingContent?(a(),p(v,{key:0})):(a(),o("div",N,[t("div",O,[t("img",{class:"h-12 w-12",src:e.coin.image,alt:e.coin.name},null,8,T),t("div",null,[t("h2",A,i(e.coin.name),1),t("span",E,i(e.coin.symbol),1)])]),e.isLoadingUpdate?(a(),p(v,{key:0})):(a(),o("div",F,[e.isValidDateRange?(a(),o("div",G,[t("div",J,[f(" R$ "),t("span",null,i(g(h)(e.coin.currentPriceBrl.toString(),"BRL")),1)]),t("div",K,[f(" US$ "),t("span",null,i(g(h)(e.coin.currentPriceUsd.toString(),"USD")),1)])])):(a(),o("div",q,[t("p",z,i(l.value),1)]))])),t("div",Q,[j(t("input",{"onUpdate:modelValue":c[0]||(c[0]=d=>e.inputDateSearch=d),class:"w-full appearance-none border-none bg-transparent p-2 outline-none",type:"date"},null,512),[[P,e.inputDateSearch]])])]))}});const Y=m(W,[["__scopeId","data-v-0a782545"]]);export{Y as default};
